## 7.1 Struct

*  Strukturen (structs) sind benutzerdefinierte Datentypen
*  Sie erlauben es, Variablen unterschiedlicher Datentypen unter einem gemeinsamen Namen zu gruppieren
*  Dies ist nützlich, um zusammengehörige Daten logisch zu organisieren
*  Eine Strukturdeklaration legt nur fest, wie ein solcher Datentyp aussieht, aber sie reserviert noch keinen Speicher
* Speicher wird erst reserviert, wenn eine Variable vom Typ der Struktur deklariert wird

__Bsp.: Definition und Nutzung einer Struktur__

```run-c
#include <stdio.h>
#include <string.h>

struct Person {
    char name[50];
    int alter;
    float groesse;
};

int main() {
	struct Person person1 = {"Anna Schmidt", 25, 1.68};
	
	printf("Name: %s\n", person1.name);
    printf("Alter: %d\n", person1.alter);
    printf("Groesse: %.2f m\n", person1.groesse);

    struct Person person2;

    strcpy(person2.name, "Max Mustermann");
    person2.alter = 30;
    person2.groesse = 1.75;
    
    printf("\nName: %s\n", person2.name);
    printf("Alter: %d\n", person2.alter);
    printf("Groesse: %.2f m\n", person2.groesse);

    return 0;
}
```

## 7.2 Typedef

*  `typedef` ist ein Schlüsselwort in C, um einem bestehenden Datentyp einen neuen Namen (Alias) zu geben
*  Es verbessert die Lesbarkeit des Codes und vereinfacht komplexe Typdeklarationen
*  Die Syntax lautet `typedef <existierender_typ> <neuer_typname>;`

__Bsp.: Verwendung von typedef für einfache Datentypen__

```run-c
#include <stdio.h>

int main() {
    typedef int Ganzzahl; // 'Ganzzahl' ist jetzt ein Alias für 'int'
    typedef float Dezimalzahl; // 'Dezimalzahl' ist jetzt ein Alias für 'float'

    Ganzzahl a = 10;
    Dezimalzahl b = 20.5f;

    printf("Ganzzahl a: %d\n", a);
    printf("Dezimalzahl b: %.1f\n", b);

    return 0;
}
```

*  `typedef` wird häufig in Verbindung mit Strukturen verwendet, um die Deklaration von Strukturvariablen zu vereinfachen
*  Man spart sich die wiederholte Angabe des `struct`-Schlüsselworts

__Bsp.: Verwendung von typedef mit Strukturen__

```run-c
#include <stdio.h>
#include <string.h>

typedef struct {
    char titel[100];
    char autor[50];
    int jahr;
} Buch; // 'Buch' ist jetzt ein Alias für diese unbenannte Struktur

int main() {
    // Deklaration einer Buch-Variable ohne 'struct'-Schlüsselwort
    Buch buch1;

    strcpy(buch1.titel, "Die Abenteuer von Tom Sawyer");
    strcpy(buch1.autor, "Mark Twain");
    buch1.jahr = 1876;

    printf("Titel: %s\n", buch1.titel);
    printf("Autor: %s\n", buch1.autor);
    printf("Jahr: %d\n", buch1.jahr);

    return 0;
}
```

## 7.3 Zeiger in Strukturen

* Bitfelder speichern eine spezifische Anzahl von Bits innerhalb eines Integer-Typs in Strukturen oder Unions
* sie sparen Speicherplatz für kleine Wertebereiche und sind nützlich in der hardwarenahen Programmierung
* die Syntax ist `typ member_name : anzahl_bits;`

__Bsp.: Definition und Nutzung von Bitfeldern__

```run-c
#include <stdio.h>

typedef struct {
    unsigned int is_on : 1;        // 1 Bit für AN/AUS
    unsigned int mode : 2;         // 2 Bits für 4 Modi
    unsigned int error_code : 5;   // 5 Bits für Fehlercode
} SchalterStatus;

int main() {
    SchalterStatus meinSchalter;

    meinSchalter.is_on = 1;
    meinSchalter.mode = 2;
    meinSchalter.error_code = 15;

    printf("Schalter Status:\n");
    printf("  Ist an: %u\n", meinSchalter.is_on);
    printf("  Modus: %u\n", meinSchalter.mode);
    printf("  Fehlercode: %u\n", meinSchalter.error_code);
    
    // Die tatsächliche Größe der Struktur kann aufgrund von Compiler-Optimierungen variieren
    printf("  Größe der SchalterStatus-Struktur: %lu Byte\n", sizeof(SchalterStatus));

    return 0;
}
```

## 7.4 Unions

* eine Union ist ein spezieller Datentyp in C, der es erlaubt, verschiedene Datentypen im *selben Speicherbereich* zu speichern
* im Gegensatz zu Strukturen teilen sich alle Mitglieder einer Union denselben Speicherplatz
* zu einem bestimmten Zeitpunkt kann nur *eines* der Mitglieder einer Union einen gültigen Wert speichern
* die Größe einer Union ist gleich der Größe ihres größten Mitglieds
* sie sind nützlich, um Speicherplatz zu sparen, wenn nicht alle Daten gleichzeitig benötigt werden, oder um Daten auf verschiedene Arten zu interpretieren

__Bsp.: Definition und Nutzung einer Union__

```run-c
#include <stdio.h>

// Union, die entweder einen int oder einen float speichern kann
typedef union {
    int i;
    float f;
} Daten;

int main() {
    Daten meineDaten;

    meineDaten.i = 10;
    printf("Integer-Wert: %d\n", meineDaten.i);

    meineDaten.f = 22.5f;
    printf("Float-Wert: %.1f\n", meineDaten.f);
    
    // Der vorherige Integer-Wert ist nun überschrieben
	printf("Integer-Wert: %d\n", meineDaten.i);

    return 0;
}
```

## 7.5 Enumerations

* Enumerationen (kurz `enum`) sind benutzerdefinierte Datentypen in C, die es ermöglichen, eine Menge von benannten Integer-Konstanten zu definieren
* sie verbessern die Lesbarkeit des Codes, indem sie numerischen Werten aussagekräftige Namen geben
* standardmäßig beginnt der erste Enumerator mit 0, und die folgenden erhalten jeweils den um eins erhöhten Wert, aber man kann auch eigene Werte zuweisen

>Wir können benannte ganzzahlige Konstanten erzeugen

__Bsp.: Definition und Nutzung einer Enumeration__

```run-c
#include <stdio.h>

typedef enum {
    MONTAG,    // hat standardmäßig den Wert 0
    DIENSTAG,  // hat standardmäßig den Wert 1
    MITTWOCH,  // hat standardmäßig den Wert 2
    DONNERSTAG,
    FREITAG,
    SAMSTAG,
    SONNTAG
} Wochentag;

typedef enum {
    FEHLER_OK = 0,
    FEHLER_DATEI_NICHT_GEFUNDEN = 101,
    FEHLER_ZUGRIFF_VERWEIGERT = 102
} Fehlercode;

int main() {
    Wochentag heute = MITTWOCH;
    Fehlercode status = FEHLER_OK;

    printf("Heute ist: ");
    switch(heute) { // aquivalent zu switch(2)
        case MONTAG: printf("Montag\n"); break;
        case DIENSTAG: printf("Dienstag\n"); break;
        case MITTWOCH: printf("Mittwoch\n"); break;
        case DONNERSTAG: printf("Donnerstag\n"); break;
        case FREITAG: printf("Freitag\n"); break;
        case SAMSTAG: printf("Samstag\n"); break;
        case SONNTAG: printf("Sonntag\n"); break;
    }
    printf("Der numerische Wert für MITTWOCH ist: %d\n", heute);

    if (status == FEHLER_OK) {
        printf("Operation erfolgreich. Statuscode: %d\n", status);
    } else {
        printf("Fehler aufgetreten. Statuscode: %d\n", status);
    }

    return 0;
}
```
